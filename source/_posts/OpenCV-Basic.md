---
title: OpenCV 基础知识与概念
date: 2019-03-28 16:10:51
description: 记录一下一些学习数字图像处理的基础知识与概念
categories: [OpenCV篇]
tags: [OpenCV]
---

<!-- more -->
## 一些概念

### 数字图像
数字图像指的是现在的图像都是以二维数字表示，每个像素的灰度值均由一个数字表示，范围为0-255(2^8)

### 二值图像
图像中每个像素的灰度值仅可取0或1，即不是取黑，就是取白，二值图像可理解为黑白图像

### 灰度图像
图像中每个像素可以由0-255的灰度值表示，具体表现为从全黑到全白中间有255个介于中间的灰色值可以取

### 彩色图像
每幅图像是由三幅灰度图像组合而成，依次表示红绿蓝三通道的灰度值，即我们熟知的RGB，此时彩色图像要视为三维的 `[height，width, 3]`

## CvType

### 通道
OpenCV 中，图像可以分别为1，2，3，4 通道

- 通道为灰度图；
- 通道的图像是RGB555和RGB565。2通道图在程序处理中会用到，如傅里叶变换，可能会用到，一个通道为实数，一个通道为虚数，主要是编程方便。RGB555是16位的，2个字节，5+6+5，第一字节的前5位是R，后三位+第二字节是G，第二字节后5位是B，可见对原图像进行压缩了
- 通道为彩色图（RGB）；
- 通道为 RGBA ，是RGB加上一个A通道，也叫alpha通道，表示透明度，PNG图像是一种典型的4通道图像。alpha通道可以赋值0到1，或者0到255，表示透明到不透明

常使用的是1，3，4通道； 2通道不常见

### 组合规则
`CV_[bite](U|S|F)C[channels]`

bite : 比特数，位数。 有 8bite，16bite，32bite，64bite,对应在 Mat 中，每个像素的所占的空间大小，8位即 CV_8

U|S|F ：
    - U : unsigned int , 无符号整形
    - S : signed int , 有符号整形
    - F : float , 单精度浮点型,float类型本身即有符号

这里的有符号、无符号是针对图像二进制编码来讲的。我在写的过程中大多数情况下都是使用的无符号，即 CV_8U ,CV_16U，当有计算时可能会介入有符号（存在负数），没学过 C++，对底层也一知半解，望高手解答。

C (channels)：图像的通道数

比如: `CV_8UC3` 即 8位无符号的3通道（RGB 彩色）图像

### 参数说明
8U
    - 说明：无符号的8位图
    - 值：CV_8UC1,CV_8UC2,CV_8UC3,CV_8UC4
    - 通道取值范围：0~255

8S
    - 说明：有符号的8位图
    - 值：CV_8SC1,CV_8SC2,CV_8SC3,CV_8SC4
    - 通道取值范围：-128~127

16U
    - 说明：无符号的16位图
    - 值：CV_16UC1,CV_16UC2,CV_16UC3,CV_16UC4
    - 通道取值范围：0~65535

16S
    - 说明：有符号的16位图
    - 值：CV_16SC1,CV_16SC2,CV_16SC3,CV_16SC4
    - 通道取值范围：-32768~32767

32S
    - 说明：无符号的32位图
    - 值：CV_32SC1,CV_32SC2,CV_32SC3,CV_32SC4
    - 通道取值范围：2147483648~2147483647

32F
    - 说明：浮点型32位图
    - 值：CV_32FC1,CV_32FC2,CV_32FC3,CV_32FC4
    - 通道取值范围：1.18*(10(-38次方))~3.40*(10(38次方))

64F
    - 说明：浮点型64位图
    -值：CV_64FC1,CV_64FC2,CV_64FC3,CV_64FC4
    - 通道取值范围：2.23*(10(-308次方))~1.79*(10(308次方))

1U
    - 说明：1位
    - 值：IPL_DEPTH_1U
    - 通道取值范围：0~1


## 色彩空间
### 常见的色彩空间
- RGB
- HSV
- HIS
- YCRCB
- YUV

### HSV
HSV分别是色调（Hue），饱和度（Saturation）和亮度（Value）

H调整颜色；S越大，图像色彩越丰富，颜色越鲜艳；V越大，图像越亮

#### HSV颜色取值范围

1. H:0— 180 : 之所以不是 360,是因为 8 位图 最大是 255,360 已经超出范围,以 180 为限定

2. S: 0— 255

3. V: 0— 255

记住下面这张图, 可使用这张图中的范围来查找某种颜色

![HSV](http://image.joylau.cn/blog/OpenCV-HSV.png)

#### 转换方法

`Imgproc.cvtColor(src,det,Imgproc.COLOR_BGR2HSV);`

